# OKTA_AWS_LOGIN
CLI tool that uses SAML assertions generated by Okta's IdP portal to generate temporary AWS CLI credentials via AWS STS.

Written by Joe Keegan - <joe@nimbusscale.com>

This software is distributed under the MIT license. Please see the file LICENSE.txt for terms of use and redistribution. 
Happy sharing.

# DESCRIPTION
The okta_aws_login tool, written in Python 3, was developed to help solve the issue of needing to generate and store long lived AWS Access and Secret Keys on systems to be able to utilize AWS's CLI tools.

Okta is a leading Identity Provider and is often used by organizations to federate user credentials and provide Single Sign On access to the AWS console. While using Okta resolves the issue of providing federated access to the AWS console it does not provide an "out-of-the-box" solution for federated access when using AWS's CLI tools.

The okta_aws_login tool will prompt the user for the necissary credentials needed to authenticate with the Okta IdP and then utilize the SAML assertion generation by Okta to retrieve temporary AWS Access and Secret Keys and an AWS Session Token. The AWS credentials will then be written to the local AWS credentials file to be utilized by aws cli.

# Configuration
Configuration for okta_aws_login is done via variables set within the module. There is one variable that must be changed and a few others that you may want to change.  

* idp_entry_url - You must enter the URL for the AWS app within Okta that is configured to provide access to AWS with the desired role.

* cred_profile - By default the okta_aws_login tool writes the credentials to a profile within the aws credentials file that matches the name of the AWS role assumed with the credentials. This can be changed from "role" to "default" which will cause the okta_aws_login tool to write the credentials to the default profile. Writing the default profile will often be the desired behavior, but is not the default behavior as it prevents any unexpected overwriting of the default profile credentials. 

* region and output_format - These will define the region and output for the profile written to the aws credentials file. They default to "us-west-2" and "json". Change them to suit your needs.



